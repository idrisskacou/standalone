{
  "version": 3,
  "sources": ["../../../../../../node_modules/@astrouxds/astro-web-components/dist/esm/rux-pop-up.entry.js"],
  "sourcesContent": ["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-416188d1.js';\nimport { c as computePosition, a as autoUpdate, o as offset, b as autoPlacement, f as flip, d as arrow } from './floating-ui.dom.esm-3f85c7b7.js';\nconst ruxPopUpCss = \":host{display:block;width:min-content}.hidden,:host([hidden]){display:none}.hidden{display:none !important}::slotted(*[slot=trigger]){cursor:pointer}::slotted(*[slot=trigger]:focus-visible){border-radius:var(--radius-base, 3px);outline:var(--border-width-focus-default, 1px) solid var(--color-border-focus-default, #da9ce7);outline-offset:var(--spacing-focus-default, 0.125rem)}.rux-popup{font-family:var(--font-body-1-font-family, 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif);font-size:var(--font-body-1-font-size, 1rem);font-weight:var(--font-body-1-font-weight, 400);letter-spacing:var(--font-body-1-letter-spacing, 0.005em);line-height:var(--line-height-base, 1.5rem);text-align:left}.rux-popup__content{position:absolute;padding:var(--spacing-0, 0rem);border-radius:var(--radius-base, 3px);background:var(--color-background-base-default, #101923);border:1px solid var(--color-border-interactive-muted, #2b659b);transform-style:preserve-3d;z-index:100}.rux-popup__trigger{display:contents}.rux-popup__content--menu{padding:0}.rux-popup__arrow-left{border-right:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup__arrow-top{border-bottom:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup__arrow-right{border-left:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup__arrow-bottom{border-top:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup-arrow{position:absolute;background:var(--color-border-interactive-muted, #2b659b);width:var(--spacing-4, 1rem);height:var(--spacing-4, 1rem);transform:translateZ(-1px) rotate(45deg)}\";\nconst RuxPopUp = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.ruxPopUpOpened = createEvent(this, \"ruxpopupopened\", 7);\n    this.ruxPopUpClosed = createEvent(this, \"ruxpopupclosed\", 7);\n    this._assignedOutsideClickEvent = false;\n    this.open = false;\n    this.placement = 'auto';\n    this.disableAutoUpdate = false;\n    this.enableAnimationFrame = false;\n    this.strategy = 'absolute';\n    this.closeOnSelect = false;\n    this.arrowPosition = undefined;\n  }\n  handleOpen() {\n    if (this.open) {\n      this.content.style.display = 'block';\n      this._startPositioner();\n      this.ruxPopUpOpened.emit();\n      if (!this._assignedOutsideClickEvent) {\n        window.addEventListener('mousedown', this._handleOutsideClick);\n        this._assignedOutsideClickEvent = true;\n      }\n    } else {\n      this.content.style.display = '';\n      this._stopPositioner();\n      this.ruxPopUpClosed.emit();\n      if (this._assignedOutsideClickEvent) {\n        window.removeEventListener('mousedown', this._handleOutsideClick);\n        this._assignedOutsideClickEvent = false;\n      }\n    }\n  }\n  /**\n   * Opens the pop up and returns true.\n   */\n  async show() {\n    if (this.open) {\n      return this.open;\n    } else this.open = true;\n    return this.open;\n  }\n  /**\n   * Closes the pop up and returns false.\n   */\n  async hide() {\n    if (!this.open) {\n      return this.open;\n    } else this.open = false;\n    return this.open;\n  }\n  connectedCallback() {\n    this._handleTriggerClick = this._handleTriggerClick.bind(this);\n    this._handleTriggerKeyPress = this._handleTriggerKeyPress.bind(this);\n    this._handleOutsideClick = this._handleOutsideClick.bind(this);\n    this._setTriggerTabIndex = this._setTriggerTabIndex.bind(this);\n    if (this.open && !this._assignedOutsideClickEvent) {\n      window.addEventListener('mousedown', this._handleOutsideClick);\n      this._assignedOutsideClickEvent = true;\n    }\n  }\n  componentWillLoad() {\n    this._setTriggerTabIndex();\n  }\n  componentDidRender() {\n    if (this.open) {\n      this._startPositioner();\n    }\n  }\n  async _handleTriggerClick(event) {\n    //excludes synthetic keyboard events such as Enter on a button behaving as a click\n    if (event.detail > 0) {\n      this.open = !this.open;\n    }\n  }\n  //part of focus + accessible keyboard events\n  async _handleTriggerKeyPress(event) {\n    if (event.key === 'Enter') {\n      this.open = !this.open;\n    }\n  }\n  _position() {\n    if (!this.open || !this.triggerSlot || !this.content) {\n      return;\n    }\n    const placementCheck = () => {\n      // disable auto update = false, placement is anything\n      if (!this.disableAutoUpdate) {\n        return [offset(12), this.placement === 'auto' ? autoPlacement({\n          alignment: 'start'\n        }) : flip(), arrow({\n          element: this.arrowEl\n        })];\n      }\n      // disableAutoUpdate = true, placement=auto\n      else if (this.placement === 'auto') {\n        /* we need to set a starting placement for the user because 'auto' is only understood by floating-ui as something means,\n        'pick whatever side fits best', and in this case we don't want any automatic setting of placements */\n        this.placement = 'top';\n        return [offset(12), arrow({\n          element: this.arrowEl\n        })];\n        // disableAutoUpdate = true, placement != auto\n      } else {\n        return [offset(12), arrow({\n          element: this.arrowEl\n        })];\n      }\n    };\n    computePosition(this.triggerSlot, this.content, {\n      //@ts-ignore\n      placement: this.placement,\n      strategy: this.strategy,\n      middleware: placementCheck()\n    }).then(({\n      x,\n      y,\n      placement,\n      middlewareData\n    }) => {\n      Object.assign(this.content.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n        position: `${this.strategy}`\n      });\n      //@ts-ignore\n      const {\n        x: arrowX,\n        y: arrowY\n      } = middlewareData.arrow;\n      const staticSide = {\n        top: 'bottom',\n        right: 'left',\n        bottom: 'top',\n        left: 'right'\n      }[placement.split('-')[0]];\n      Object.assign(this.arrowEl.style, {\n        left: arrowX != null ? `${arrowX}px` : '',\n        top: arrowY != null ? `${arrowY}px` : '',\n        right: '',\n        bottom: '',\n        //@ts-ignore\n        [staticSide]: '-6px'\n      });\n    });\n    this._setArrowPosition();\n  }\n  //set a tabindex if the trigger element does not have one, necessary for items that can not natively receive focus\n  _setTriggerTabIndex() {\n    const triggerEl = this.el.querySelector(`[slot='trigger']`);\n    triggerEl.hasAttribute('tabindex') ? null : triggerEl.setAttribute('tabindex', '0');\n  }\n  _startPositioner() {\n    this._stopPositioner();\n    if (this.open) {\n      this._position();\n      this._positionerCleanup = autoUpdate(this.triggerSlot, this.content, this._position.bind(this), {\n        animationFrame: this.enableAnimationFrame\n      });\n    }\n  }\n  async _setArrowPosition() {\n    const arrowPos = await this._determineArrowPosition();\n    if (this.arrowPosition === arrowPos) {\n      return;\n    } else this.arrowPosition = arrowPos;\n  }\n  async _determineArrowPosition() {\n    if (!this.open) {\n      return;\n    }\n    const triggerElRect = await this.getTriggerRect();\n    const arrowDivRect = await this.getArrowRect();\n    if (triggerElRect.bottom > arrowDivRect.bottom && triggerElRect.top < arrowDivRect.top) {\n      if (triggerElRect.right > arrowDivRect.right) {\n        return 'left';\n      } else {\n        return 'right';\n      }\n    } else {\n      if (triggerElRect.bottom > arrowDivRect.bottom) {\n        return 'top';\n      } else {\n        return 'bottom';\n      }\n    }\n  }\n  async getTriggerRect() {\n    return this.triggerSlot.getBoundingClientRect();\n  }\n  async getArrowRect() {\n    var _a;\n    return (_a = this.arrowEl) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n  }\n  _stopPositioner() {\n    if (this._positionerCleanup) {\n      this._positionerCleanup();\n      this._positionerCleanup = undefined;\n    }\n  }\n  _handleOutsideClick(e) {\n    const menuClick = e.composedPath().includes(this.contentSlot);\n    const triggerClick = e.composedPath().includes(this.triggerSlot);\n    const popUpClick = e.composedPath().includes(this.el);\n    if (!menuClick && !triggerClick && !popUpClick) {\n      this.open = false;\n    }\n  }\n  handleSelection() {\n    if (this.closeOnSelect) {\n      this.open = false;\n    }\n  }\n  get contentSlot() {\n    var _a;\n    return (_a = this.content) === null || _a === void 0 ? void 0 : _a.querySelector('slot').assignedElements({\n      flatten: true\n    })[0];\n  }\n  get triggerSlot() {\n    var _a;\n    return (_a = this.trigger) === null || _a === void 0 ? void 0 : _a.querySelector('slot').assignedElements({\n      flatten: true\n    })[0];\n  }\n  get hasMenu() {\n    var _a;\n    //@ts-ignore\n    return !!((_a = this.content) === null || _a === void 0 ? void 0 : _a.querySelector('slot').assignedElements({\n      flatten: true\n    }).filter(el => el.tagName.toLowerCase() === 'rux-menu')[0]);\n  }\n  render() {\n    return h(Host, null, h(\"div\", {\n      class: \"rux-popup\",\n      part: \"container\"\n    }, h(\"div\", {\n      onClick: this._handleTriggerClick,\n      onKeyPress: this._handleTriggerKeyPress,\n      class: \"rux-popup__trigger\",\n      ref: el => this.trigger = el,\n      part: \"trigger-container\"\n    }, h(\"slot\", {\n      name: \"trigger\"\n    })), h(\"div\", {\n      class: {\n        'rux-popup__arrow-left': this.arrowPosition === 'left',\n        'rux-popup__arrow-top': this.arrowPosition === 'top',\n        'rux-popup__arrow-right': this.arrowPosition === 'right',\n        'rux-popup__arrow-bottom': this.arrowPosition === 'bottom',\n        'rux-popup__content': true,\n        'rux-popup__content--menu': this.hasMenu,\n        hidden: this.open === false\n      },\n      \"aria-hidden\": this.open ? 'false' : 'true',\n      part: \"popup-content\",\n      ref: el => this.content = el\n    }, h(\"div\", {\n      class: \"rux-popup-arrow\",\n      ref: el => this.arrowEl = el,\n      part: \"arrow\"\n    }), h(\"slot\", null))));\n  }\n  get el() {\n    return getElement(this);\n  }\n  static get watchers() {\n    return {\n      \"open\": [\"handleOpen\"]\n    };\n  }\n};\nRuxPopUp.style = ruxPopUpCss;\nexport { RuxPopUp as rux_pop_up };"],
  "mappings": "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",
  "names": []
}
