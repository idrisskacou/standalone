import{a as d,b as l,c as h}from"./chunk-KICP2G6Q.js";import{a as o}from"./chunk-PDR7J233.js";import{e as i,f as c,g as u,k as f}from"./chunk-JEQNNXGW.js";function p(a,t){o(2,arguments);var e=d(a,t)/1e3;return e>0?Math.floor(e):Math.ceil(e)}var b=".rux-track{background:var(--color-background-surface-default, #1b2d3e);width:fit-content;border-bottom:2px solid var(--color-background-base-default, #101923)}.rux-track__header{box-sizing:border-box;padding:11px 8px 13px 8px;background:var(--color-background-surface-default, #1b2d3e);border-right:2px solid var(--color-background-base-default, #101923);display:flex;align-items:center;font-family:var(--font-body-1-font-family, 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif);font-size:var(--font-body-1-font-size, 1rem);font-weight:var(--font-body-1-font-weight, 400);letter-spacing:var(--font-body-1-letter-spacing, 0.005em);position:sticky;left:0;min-width:184px;z-index:2}.rux-timeline{scrollbar-color:var(--color-border-interactive-muted, #2b659b);position:relative;display:grid;grid-template-rows:auto;background:var(--color-background-surface-default, #1b2d3e)}.rux-track__played{grid-row-start:1;grid-column-start:2;grid-row-end:auto;background:var(--color-background-surface-selected, #1c3f5e)}.hidden{display:none}",x=(()=>{let a=class{constructor(t){f(this,t),this.hasRuler=!1,this.width=0,this.columns=0,this.interval=void 0,this.start="",this.end="",this.timezone="UTC",this.playhead=void 0}handleUpdate(t,e){e&&this.initializeRows()}handlePlayheadChange(){this.initializeRows()}handleTimezoneUpdate(){this.initializeRows()}handleTimeRegionChange(t){this.initializeRows(),t.stopPropagation()}connectedCallback(){this._handleSlotChange=this._handleSlotChange.bind(this)}_calculateGridColumnFromTime(t){if(this.start){let e=new Date(this.start);if(this.interval==="hour")return Math.abs(h(e,new Date(t)))+2;if(this.interval==="minute")return Math.abs(p(e,new Date(t)))+2;if(this.interval==="day")return Math.abs(l(e,new Date(t)))+2}return 0}_validateTimeRegion(t,e){return t?e?new Date(t)>new Date(e)?{success:!1,error:`The Time Region start date must be before the end date: ${t} - ${e}`}:new Date(t)>new Date(this.end)?{success:!1,error:`The Time Region start date does not fall within the Timeline's range: ${t} - ${this.start}/${this.end}`}:new Date(t)<new Date(this.start)&&new Date(e)<new Date(this.start)?{success:!1,error:`The Time Region start and end dates do not fall within the Timeline's range: ${t} - ${e}`}:{success:!0}:{success:!1,error:"Time Region must have a end date provided"}:{success:!1,error:"Time Region must have a start date provided"}}initializeRows(){this.playhead&&(this.playedIndicator.style.gridColumnEnd=this._calculateGridColumnFromTime(this.playhead).toString()),[...this.el.children].filter(e=>e.tagName.toLowerCase()==="rux-time-region").forEach(e=>{let r=e.style.visibility==="hidden",m=this._validateTimeRegion(e.start,e.end),n=e.start,s=e.end;if(m.success){e.start<this.start&&e.end>this.end?(e.partial="ongoing",n=this.start,s=this.end):e.start<this.start?(e.partial="start",n=this.start):e.end>this.end?(e.partial="end",s=this.end):e.partial="none",e.timezone=this.timezone,e.style.gridRow="1",e.style.display="block";let g=`${this._calculateGridColumnFromTime(n)} / ${this._calculateGridColumnFromTime(s)}`;e.style.gridColumn=g}else r||(e.style.display="none")})}_handleSlotChange(){this.initializeRows();let t=[...this.el.children].find(e=>e.tagName.toLowerCase()==="rux-ruler");this.hasRuler=!!t}render(){return i(c,null,i("div",{class:"rux-timeline rux-track",style:{gridTemplateColumns:`[header] 200px repeat(${this.columns}, ${this.width}px)`},part:"container"},i("div",{class:"rux-track__header",part:"track-header",style:{gridRow:"1"}},i("slot",{name:"label"})),i("slot",{onSlotchange:this._handleSlotChange}),i("div",{class:{"rux-track__played":this.playhead,hidden:this.hasRuler},ref:t=>this.playedIndicator=t})))}get el(){return u(this)}static get watchers(){return{start:["handleUpdate"],end:["handleUpdate"],interval:["handleUpdate"],playhead:["handlePlayheadChange"],timezone:["handleTimezoneUpdate"]}}};return a.style=b,a})();export{x as rux_track};
