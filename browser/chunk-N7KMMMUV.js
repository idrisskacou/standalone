import{a as o,b as u,c,d as s,e as g,f}from"./chunk-DPWWYAO2.js";import{d as i,e as r,f as m,g as b,h as l,k as _}from"./chunk-JEQNNXGW.js";var x=":host{display:block;width:min-content}.hidden,:host([hidden]){display:none}.hidden{display:none !important}::slotted(*[slot=trigger]){cursor:pointer}::slotted(*[slot=trigger]:focus-visible){border-radius:var(--radius-base, 3px);outline:var(--border-width-focus-default, 1px) solid var(--color-border-focus-default, #da9ce7);outline-offset:var(--spacing-focus-default, 0.125rem)}.rux-popup{font-family:var(--font-body-1-font-family, 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif);font-size:var(--font-body-1-font-size, 1rem);font-weight:var(--font-body-1-font-weight, 400);letter-spacing:var(--font-body-1-letter-spacing, 0.005em);line-height:var(--line-height-base, 1.5rem);text-align:left}.rux-popup__content{position:absolute;padding:var(--spacing-0, 0rem);border-radius:var(--radius-base, 3px);background:var(--color-background-base-default, #101923);border:1px solid var(--color-border-interactive-muted, #2b659b);transform-style:preserve-3d;z-index:100}.rux-popup__trigger{display:contents}.rux-popup__content--menu{padding:0}.rux-popup__arrow-left{border-right:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup__arrow-top{border-bottom:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup__arrow-right{border-left:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup__arrow-bottom{border-top:2px solid var(--color-border-interactive-muted, #2b659b)}.rux-popup-arrow{position:absolute;background:var(--color-border-interactive-muted, #2b659b);width:var(--spacing-4, 1rem);height:var(--spacing-4, 1rem);transform:translateZ(-1px) rotate(45deg)}",C=(()=>{let p=class{constructor(t){_(this,t),this.ruxPopUpOpened=l(this,"ruxpopupopened",7),this.ruxPopUpClosed=l(this,"ruxpopupclosed",7),this._assignedOutsideClickEvent=!1,this.open=!1,this.placement="auto",this.disableAutoUpdate=!1,this.enableAnimationFrame=!1,this.strategy="absolute",this.closeOnSelect=!1,this.arrowPosition=void 0}handleOpen(){this.open?(this.content.style.display="block",this._startPositioner(),this.ruxPopUpOpened.emit(),this._assignedOutsideClickEvent||(window.addEventListener("mousedown",this._handleOutsideClick),this._assignedOutsideClickEvent=!0)):(this.content.style.display="",this._stopPositioner(),this.ruxPopUpClosed.emit(),this._assignedOutsideClickEvent&&(window.removeEventListener("mousedown",this._handleOutsideClick),this._assignedOutsideClickEvent=!1))}show(){return i(this,null,function*(){return this.open?this.open:(this.open=!0,this.open)})}hide(){return i(this,null,function*(){if(this.open)this.open=!1;else return this.open;return this.open})}connectedCallback(){this._handleTriggerClick=this._handleTriggerClick.bind(this),this._handleTriggerKeyPress=this._handleTriggerKeyPress.bind(this),this._handleOutsideClick=this._handleOutsideClick.bind(this),this._setTriggerTabIndex=this._setTriggerTabIndex.bind(this),this.open&&!this._assignedOutsideClickEvent&&(window.addEventListener("mousedown",this._handleOutsideClick),this._assignedOutsideClickEvent=!0)}componentWillLoad(){this._setTriggerTabIndex()}componentDidRender(){this.open&&this._startPositioner()}_handleTriggerClick(t){return i(this,null,function*(){t.detail>0&&(this.open=!this.open)})}_handleTriggerKeyPress(t){return i(this,null,function*(){t.key==="Enter"&&(this.open=!this.open)})}_position(){if(!this.open||!this.triggerSlot||!this.content)return;let t=()=>this.disableAutoUpdate?this.placement==="auto"?(this.placement="top",[s(12),o({element:this.arrowEl})]):[s(12),o({element:this.arrowEl})]:[s(12),this.placement==="auto"?u({alignment:"start"}):c(),o({element:this.arrowEl})];f(this.triggerSlot,this.content,{placement:this.placement,strategy:this.strategy,middleware:t()}).then(({x:e,y:n,placement:a,middlewareData:v})=>{Object.assign(this.content.style,{left:`${e}px`,top:`${n}px`,position:`${this.strategy}`});let{x:d,y:h}=v.arrow,w={top:"bottom",right:"left",bottom:"top",left:"right"}[a.split("-")[0]];Object.assign(this.arrowEl.style,{left:d!=null?`${d}px`:"",top:h!=null?`${h}px`:"",right:"",bottom:"",[w]:"-6px"})}),this._setArrowPosition()}_setTriggerTabIndex(){let t=this.el.querySelector("[slot='trigger']");t.hasAttribute("tabindex")||t.setAttribute("tabindex","0")}_startPositioner(){this._stopPositioner(),this.open&&(this._position(),this._positionerCleanup=g(this.triggerSlot,this.content,this._position.bind(this),{animationFrame:this.enableAnimationFrame}))}_setArrowPosition(){return i(this,null,function*(){let t=yield this._determineArrowPosition();this.arrowPosition!==t&&(this.arrowPosition=t)})}_determineArrowPosition(){return i(this,null,function*(){if(!this.open)return;let t=yield this.getTriggerRect(),e=yield this.getArrowRect();return t.bottom>e.bottom&&t.top<e.top?t.right>e.right?"left":"right":t.bottom>e.bottom?"top":"bottom"})}getTriggerRect(){return i(this,null,function*(){return this.triggerSlot.getBoundingClientRect()})}getArrowRect(){return i(this,null,function*(){var t;return(t=this.arrowEl)===null||t===void 0?void 0:t.getBoundingClientRect()})}_stopPositioner(){this._positionerCleanup&&(this._positionerCleanup(),this._positionerCleanup=void 0)}_handleOutsideClick(t){let e=t.composedPath().includes(this.contentSlot),n=t.composedPath().includes(this.triggerSlot),a=t.composedPath().includes(this.el);!e&&!n&&!a&&(this.open=!1)}handleSelection(){this.closeOnSelect&&(this.open=!1)}get contentSlot(){var t;return(t=this.content)===null||t===void 0?void 0:t.querySelector("slot").assignedElements({flatten:!0})[0]}get triggerSlot(){var t;return(t=this.trigger)===null||t===void 0?void 0:t.querySelector("slot").assignedElements({flatten:!0})[0]}get hasMenu(){var t;return!!(!((t=this.content)===null||t===void 0)&&t.querySelector("slot").assignedElements({flatten:!0}).filter(e=>e.tagName.toLowerCase()==="rux-menu")[0])}render(){return r(m,null,r("div",{class:"rux-popup",part:"container"},r("div",{onClick:this._handleTriggerClick,onKeyPress:this._handleTriggerKeyPress,class:"rux-popup__trigger",ref:t=>this.trigger=t,part:"trigger-container"},r("slot",{name:"trigger"})),r("div",{class:{"rux-popup__arrow-left":this.arrowPosition==="left","rux-popup__arrow-top":this.arrowPosition==="top","rux-popup__arrow-right":this.arrowPosition==="right","rux-popup__arrow-bottom":this.arrowPosition==="bottom","rux-popup__content":!0,"rux-popup__content--menu":this.hasMenu,hidden:this.open===!1},"aria-hidden":this.open?"false":"true",part:"popup-content",ref:t=>this.content=t},r("div",{class:"rux-popup-arrow",ref:t=>this.arrowEl=t,part:"arrow"}),r("slot",null))))}get el(){return b(this)}static get watchers(){return{open:["handleOpen"]}}};return p.style=x,p})();export{C as rux_pop_up};
