import{b as a,c as d,d as o,e as c,f as u}from"./chunk-DPWWYAO2.js";import{b as p}from"./chunk-DD6SS4TG.js";import{d as r,e as s,f as g,g as f,h as l,k as m}from"./chunk-JEQNNXGW.js";var y=":host{--delay:800ms}*{box-sizing:border-box}span{display:contents}.tooltip{display:inline-block;background:var(--tooltip-color-background, #3c3e42);padding:calc(var(--spacing-1, 0.25rem) / 2) var(--spacing-2, 0.5rem);color:var(--tooltip-color-text, #ffffff);width:fit-content;border-radius:var(--tooltip-radius, 1px);z-index:100;width:max-content;position:absolute;top:0;left:0;opacity:1;visibility:visible;transition:opacity 200ms ease-in;font-size:var(--font-body-2-font-size, 0.875rem);line-height:var(--font-body-2-line-height, calc(20 / 14));-webkit-user-select:none;user-select:none}.rux-tooltip__trigger{display:inline;flex-basis:100%}:host([open]) .tooltip{transition-delay:var(--delay);transition-property:opacity}.hidden{opacity:0 !important;visibility:hidden}",S=(()=>{let h=class{constructor(t){m(this,t),this.ruxTooltipOpened=l(this,"ruxtooltipopened",7),this.ruxTooltipClosed=l(this,"ruxtooltipclosed",7),this.currentSlotted=void 0,this.hasTriggerSlot=!1,this.delegatedFocus=!1,this.message="",this.open=!1,this.delay=800,this.offset=8,this.placement="auto",this.disableAutoUpdate=!1,this.strategy="absolute"}handleDelay(){!isNaN(Number(this.delay))&&this.el.style.setProperty("--delay",`${Number(this.delay)}ms`)}handleOpen(){this.open?(this.content.style.display="block",this._startPositioner(),this.ruxTooltipOpened.emit()):(this.content.style.display="",this._stopPositioner(),this.ruxTooltipClosed.emit())}handlePlacement(){this._startPositioner()}handleKeypress(t){if(t.key!=="Escape")return;let e=this.trigger.matches(":hover"),i=this.triggerSlot.contains(document.activeElement);!e&&!i||this.open&&this.hide()}show(){return r(this,null,function*(){return this.open?this.open:(this.open=!0,this.open)})}hide(){return r(this,null,function*(){if(this.open)this.open=!1;else return!this.open;return!this.open})}connectedCallback(){this._handleSlotChange=this._handleSlotChange.bind(this),this._handleTooltipShow=this._handleTooltipShow.bind(this),this._handleTooltipHide=this._handleTooltipHide.bind(this)}disconnectedCallback(){this.el.shadowRoot.removeEventListener("slotchange",this._handleSlotChange)}componentWillLoad(){this._handleSlotChange()}componentDidLoad(){this.handleDelay(),this.handleOpen()}_position(){if(!this.open||!this.triggerSlot||!this.content)return;let t=()=>this.disableAutoUpdate?this.placement==="auto"?[o(this.offset),a({alignment:"start"})]:[o(this.offset)]:[o(this.offset),this.placement==="auto"?a({alignment:"start"}):d()];u(this.triggerSlot,this.content,{placement:this.placement,strategy:this.strategy,middleware:t()}).then(({x:e,y:i})=>{Object.assign(this.content.style,{left:`${e}px`,top:`${i}px`,position:`${this.strategy}`})})}_startPositioner(){this._stopPositioner(),this.open&&(this._position(),this.disableAutoUpdate||(this._positionerCleanup=c(this.triggerSlot,this.content,this._position.bind(this))))}_stopPositioner(){this._positionerCleanup&&(this._positionerCleanup(),this._positionerCleanup=void 0)}get triggerSlot(){var t,e;return((t=this.trigger)===null||t===void 0?void 0:t.querySelector("slot").assignedElements({flatten:!0})[0])!==void 0?(e=this.trigger)===null||e===void 0?void 0:e.querySelector("slot").assignedElements({flatten:!0})[0]:this.trigger}get hasTrigger(){return this.trigger?!0:this.hasTriggerSlot}_handleSlotChange(){this.hasTriggerSlot=p(this.el)}_handleTooltipShow(){this.open||(this.open=!0)}_handleTooltipHide(){this.open&&(this.open=!1)}render(){let{_handleSlotChange:t,_handleTooltipShow:e,_handleTooltipHide:i}=this;return s(g,null,s("span",{onMouseEnter:e,onMouseLeave:i,onFocusin:e,onFocusout:i},s("span",{class:"rux-tooltip__trigger",part:"trigger-container",ref:n=>this.trigger=n,"aria-describedby":"tooltip"},s("slot",{onSlotchange:t})),s("span",{"aria-hidden":this.open?"false":"true",class:{tooltip:!0,hidden:!this.open},id:"tooltip",role:"tooltip",part:"container",ref:n=>this.content=n},this.message)))}get el(){return f(this)}static get watchers(){return{delay:["handleDelay"],open:["handleOpen"],placement:["handlePlacement"]}}};return h.style=y,h})();export{S as rux_tooltip};
